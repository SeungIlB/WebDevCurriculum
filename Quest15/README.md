# Quest 15. 자동화된 테스트

## Introduction
* 이번 퀘스트에서는 자동화된 테스트에 어떤 장점이 있는지, 어떤 식으로 구축할 수 있는지에 대해 알아보겠습니다.

## Topics
* Automated Test
  * TDD
  * Unit Test
  * Integration Test
  * E2E Test
  * Stub & Mock
* Jest
* Puppeteer

## Resources
* [Unit Test (단위 테스트) 도입하기](https://www.popit.kr/unit-test-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%8F%84%EC%9E%85%ED%95%98%EA%B8%B0-1%ED%8E%B8/)
* [소프트웨어 테스트 안티 패턴](https://velog.io/@leejh3224/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%95%88%ED%8B%B0-%ED%8C%A8%ED%84%B4)
* [End-to-End testing with Puppeteer and Jest](https://medium.com/touch4it/end-to-end-testing-with-puppeteer-and-jest-ec8198145321)
* [Mock & Stub](https://stackoverflow.com/questions/3459287/whats-the-difference-between-a-mock-stub)

## Checklist
* 자동화된 테스트를 만드는 것에는 어떤 장점과 단점이 있을까요?
  * 자동화된 테스트를 만드는 것은 소프트웨어 개발에서 중요한 단계 중 하나입니다. 이에 따라 자동화된 테스트를 만드는 것에는 다음과 같은 장단점이 있습니다.

  * 장점:

  * 빠른 테스트 수행: 자동화된 테스트는 빠르게 수행할 수 있으며, 결과를 즉시 확인할 수 있습니다. 이를 통해 소프트웨어 개발의 생산성을 높일 수 있습니다.
  * 일관성 있는 테스트: 자동화된 테스트를 사용하면 일관성 있는 테스트를 수행할 수 있습니다. 이를 통해 신뢰성 높은 소프트웨어를 개발할 수 있습니다.
  * 더 많은 테스트 수행: 자동화된 테스트를 사용하면 더 많은 테스트를 수행할 수 있습니다. 이를 통해 소프트웨어의 품질을 높일 수 있습니다.
  * 버그 발견 용이성: 자동화된 테스트를 사용하면 버그를 발견하기 쉬워집니다. 이를 통해 소프트웨어의 결함을 최소화할 수 있습니다.
  
  * 단점:

  * 초기 투자 비용: 자동화된 테스트를 구현하려면 초기 투자 비용이 필요합니다. 이는 인력과 시간, 도구 등을 포함합니다.
  * 유지보수 비용: 자동화된 테스트는 유지보수가 필요합니다. 소프트웨어가 변경되면 테스트도 변경해야 합니다.
  * 완벽한 테스트 불가능: 자동화된 테스트는 완벽한 테스트를 보장하지 않습니다. 누락된 케이스나 예외 상황이 있을 수 있습니다.
  * 가짜 양성 결과: 자동화된 테스트는 가짜 양성 결과를 출력할 수 있습니다. 이는 실제로 버그가 아닌 것을 버그로 오해하는 경우를 말합니다.
  자동화된 테스트는 장점이 많지만, 초기 투자 비용과 유지보수 비용을 감수해야 합니다. 또한 완벽한 테스트를 보장하지는 않으므로, 수동 테스트와 함께 사용하는 것이 좋습니다.

  * TDD(Test-Driven Development)란 무엇인가요? TDD의 장점과 단점은 무엇일까요?
    * TDD(Test-Driven Development)는 소프트웨어 개발 방법 중 하나로, 테스트를 먼저 작성하고 해당 테스트를 통과시키는 코드를 작성하는 방법입니다. TDD의 세 가지 단계는 다음과 같습니다.

    * 테스트 작성: 새로운 기능 또는 수정된 기능에 대한 테스트를 작성합니다.
    * 테스트 통과시키기: 작성된 테스트를 통과시키기 위한 최소한의 코드를 작성합니다.
    * 리팩토링: 작성된 코드를 개선하고 중복을 제거하는 등의 리팩토링을 수행합니다.
    
    * TDD의 장점은 다음과 같습니다.

    * 높은 코드 품질: 테스트 코드를 먼저 작성하기 때문에, 코드 품질이 높아집니다. 코드가 테스트 가능하고, 중복이 줄어들며, 더욱 간결해집니다.
    * 빠른 피드백: TDD를 사용하면 코드 변경에 대한 피드백이 빠릅니다. 테스트를 실행하기 때문에 코드 변경에 대한 문제점을 빠르게 파악하고 수정할 수 있습니다.
    * 안정적인 코드: TDD는 코드가 안정적이고 버그가 적은 코드를 만들도록 도와줍니다. 테스트를 작성하고 통과시키기 때문에, 코드의 안정성이 높아지고 버그가 적어집니다.
    
    * TDD의 단점은 다음과 같습니다.

    * 추가적인 시간과 노력이 필요: TDD는 테스트 코드를 작성해야 하기 때문에, 개발에 추가적인 시간과 노력이 필요합니다.
    * 테스트 코드 유지보수 비용: TDD를 사용하면 테스트 코드도 작성해야 하기 때문에, 유지보수 비용도 높아집니다.
    * 설계 결정에 대한 제약: TDD를 사용하면 작은 단위의 코드를 작성해야 하기 때문에, 설계 결정에 제약이 있을 수 있습니다.
    
    * TDD는 코드 품질을 높이고, 빠른 피드백과 안정적인 코드를 만들 수 있게 해주는 장점이 있지만, 추가적인 시간과 노력이 필요하며 설계 결정에 제약이 있을 수 있습니다. 따라서 프로젝트의 특성과 상황에 따라 TDD를 적용할지 말지 결정해야 합니다.

* 테스트들 간의 계층에 따라 어떤 단계들이 있을까요?
  * 소프트웨어 테스트에서 테스트 간의 계층 구조에는 여러 가지가 있지만, 가장 일반적인 테스트 계층 구조에는 다음과 같은 단계가 있습니다.

  * 단위 테스트(Unit Testing) : 개별 코드 모듈을 테스트하는 것으로, 함수 또는 메소드 단위에서 수행됩니다.
  * 통합 테스트(Integration Testing) : 개별 코드 모듈이 함께 작동할 때 발생할 수 있는 문제를 확인하기 위해 모듈을 조합하여 수행됩니다.
  * 시스템 테스트(System Testing) : 전체 시스템의 작동을 테스트하여 비즈니스 요구 사항을 충족하는지 확인합니다.
  * 인수 테스트(Acceptance Testing) : 고객이 요구하는 기능과 비즈니스 요구 사항을 충족하는지 확인하기 위해 시스템을 테스트합니다.
  * 성능 테스트(Performance Testing) : 시스템이 어느 정도의 작업량을 처리할 수 있는지 테스트합니다.
  * 보안 테스트(Security Testing) : 시스템의 보안 취약점을 찾아내고 보안적인 측면에서 적합한지를 테스트합니다.
  
  * 이러한 계층 구조는 개발자와 QA팀이 각 단계에서 적절한 테스트를 수행하여 소프트웨어의 안정성과 신뢰성을 높일 수 있습니다.

  * 유닛 테스트, 통합 테스트, E2E 테스트는 각각 어떤 것을 뜻하나요?
    * 유닛 테스트(Unit Test)는 개별 코드 모듈을 테스트하는 것으로, 함수 또는 메소드 단위에서 수행됩니다. 유닛 테스트는 개발자가 코드를 작성하는 동안 자신의 코드에 대한 검증을 수행하고 코드 변경 사항이 코드 기능에 영향을 미치는지 확인할 수 있는 기회를 제공합니다.

    * 통합 테스트(Integration Test)는 개별 코드 모듈이 함께 작동할 때 발생할 수 있는 문제를 확인하기 위해 모듈을 조합하여 수행됩니다. 통합 테스트는 모듈 간 인터페이스에서 발생할 수 있는 문제를 식별하여 해결할 수 있는 기회를 제공합니다.

    * E2E(End-to-End) 테스트는 소프트웨어 제품의 전체 시스템을 테스트하는 것으로, 실제 사용자 시나리오를 시뮬레이션합니다. 이 테스트는 전체 시스템이 예상대로 작동하는지 확인하고 비즈니스 요구 사항을 충족하는지 확인하는 데 사용됩니다. E2E 테스트는 유닛 및 통합 테스트와는 달리 자동화가 어렵고 시간과 비용이 많이 소요될 수 있습니다.

  * 테스트에 있어서 Stub과 Mock은 어떤 개념을 가리키는 것일까요?
    * Stub과 Mock은 테스트에서 사용되는 가짜 객체(fake objects)를 가리키는 용어입니다.

    * Stub은 실제로 동작하지 않는 대신 특정한 값을 반환하는 가짜 객체입니다. 예를 들어, 네트워크 호출이나 데이터베이스 쿼리와 같은 외부 의존성을 가진 코드를 테스트할 때, Stub은 외부 의존성을 대체하여 이러한 코드가 동작하는 것을 테스트할 수 있게 해줍니다.

    * Mock은 Stub과 비슷하지만, 호출 여부와 호출 매개변수 등과 같은 객체의 상호작용을 확인할 수 있는 기능을 제공합니다. Mock 객체는 예상되는 상호작용을 모방하고 해당 상호작용이 발생했는지 확인할 수 있습니다. 이를 통해 코드가 다른 객체와 상호작용할 때 예상대로 동작하는지 확인할 수 있습니다.

    * 따라서, Stub과 Mock은 테스트에서 실제 객체 대신에 사용되는 가짜 객체로, 특히 외부 의존성이 있는 코드를 테스트할 때 사용됩니다.

* Jest는 어떤 일을 하며 어떻게 사용하는 테스트 프레임워크일까요?
  * Jest는 Facebook에서 개발한 자바스크립트 테스트 프레임워크입니다. Jest는 유닛 테스트, 통합 테스트, E2E 테스트 등 다양한 종류의 테스트를 지원하며, 간단한 구성과 사용이 가능하다는 특징을 가지고 있습니다.

  Jest는 자바스크립트 코드를 실행하고, 코드의 결과가 예상한 대로인지 확인하는 테스트를 수행합니다. Jest는 다양한 기능을 제공하는데, 예를 들어 다음과 같은 기능이 있습니다.

  * 자동화된 테스트 실행
  * 코드 커버리지 보고서 생성
  * 모의 객체(Mock)를 이용한 테스트
  * Snapshot 테스트를 통한 UI 테스트
  * 비동기 코드에 대한 테스트
  * Jest는 기본적으로 자바스크립트 코드를 테스트하는 데 사용되며, Babel과 같은 트랜스파일러를 통해 타입스크립트 코드도 테스트할 수 있습니다.

  * Jest를 사용하려면, 테스트할 코드와 같은 디렉토리에 .test.js 또는 .spec.js와 같은 접미사를 가진 테스트 파일을 작성하면 됩니다. 그리고 Jest에서 제공하는 describe와 it 함수를 사용하여 테스트 스위트를 작성하고, 테스트 코드를 작성합니다. Jest는 npm 또는 yarn과 같은 패키지 매니저를 통해 설치할 수 있으며, CLI(Command Line Interface)를 통해 간단하게 사용할 수 있습니다.

  * Jest 이외의 테스트 프레임워크는 어떤 것이 있고 어떤 장단점이 있을까요?
  * Jest 이외에도 다양한 테스트 프레임워크가 있습니다. 각각의 프레임워크는 서로 다른 특징과 장단점을 가지고 있습니다.
  ```
  * Mocha
  * Node.js와 브라우저에서 실행 가능한 유연한 테스트 프레임워크
  * BDD(Behavior-Driven Development)와 TDD(Test-Driven Development) 스타일 모두 지원
  * Assertion 라이브러리 없이 사용 가능
  * 콜백 지옥(Callback Hell) 발생 가능성 있음
  ```
  ```
  * Jasmine
  * 독립형 BDD 스타일 테스트 프레임워크
  * Assertion, Mocking, Spying 등 다양한 기능을 내장하고 있음
  * 사용법이 간단하고 가독성이 좋음
  * 테스트 수행 속도가 다른 프레임워크에 비해 상대적으로 느릴 수 있음
  ```
  ```
  * Ava
  * 빠른 테스트 수행 속도가 특징
  * 실행 속도가 빠르기 때문에 커버리지 툴이나 웹팩과 연동하여 사용하기 좋음
  * Assertion 라이브러리가 없기 때문에 다른 라이브러리와 함께 사용해야 함
  * 테스트 파일 실행 시간이 짧아서 에러 디버깅이 어려울 수 있음
  ```
  ```
  * Cypress
  * E2E 테스트에 최적화된 프레임워크
  * 브라우저에서 실행되는 테스트를 지원하며, UI와 관련된 테스트를 손쉽게 작성 가능
  * 크로스 브라우징 테스트 기능을 내장하고 있음
  * 별도의 서버를 실행하므로 초기 설정이 복잡할 수 있음
  ```
  ```
  * Puppeteer
  * headless Chrome을 사용하여 UI 테스트를 자동화하는 라이브러리
  * Chrome DevTools Protocol을 사용하므로 Chrome 브라우저에서만 작동
  * E2E 테스트 및 스크래핑 등 다양한 용도로 사용 가능
  * JavaScript 코드로 제어할 수 있어 자유로운 테스트가 가능하지만, Jest와 같은 테스트 프레임워크와 함께 사용해야 함
  ```
  * 각 프레임워크는 서로 다른 특징과 용도를 가지고 있으므로, 테스트 목적에 맞게 선택하고 사용하는 것이 좋습니다.

* Puppeteer는 어떤 일을 하며 어떻게 사용하는 테스트 프레임워크일까요?
  * Puppeteer는 Chrome 브라우저를 제어할 수 있는 Node.js 라이브러리로, 테스트 자동화, 웹 스크래핑, 크롤링 등에 사용됩니다. Puppeteer를 사용하면 JavaScript로 Chrome 브라우저를 제어하고, 페이지 내용을 변경하거나 폼을 제출하고, 스크린샷을 찍는 등의 작업을 수행할 수 있습니다.

  * Puppeteer는 다음과 같은 특징을 가지고 있습니다.

  * Chrome 브라우저를 직접 제어하므로 브라우저 동작이 더 정확하게 모사됩니다.
  * 스크린샷을 찍는 등의 기능을 포함하고 있어, 브라우저 내부 동작을 확인하는 데 유용합니다.
  * Headless 모드를 지원하므로 브라우저 UI 없이 실행될 수 있습니다.
  * 비동기적인 자바스크립트 코드를 실행할 수 있어서 테스트 자동화에 적합합니다.
  * Puppeteer는 다양한 테스트 프레임워크와 함께 사용될 수 있습니다. Jest, Mocha, Jasmine 등의 테스트 프레임워크에서 Puppeteer를 사용하여 E2E 테스트나 UI 테스트를 수행할 수 있습니다. Puppeteer 자체적으로도 테스트 수행 기능을 제공하고 있습니다.


## Quest
* 직전 퀘스트의 메모장의 서버와 클라이언트 각 부분에 유닛 테스트, 통합 테스트, E2E 테스트 등을 추가해 보세요.
  * `npm test` 명령을 통해 모든 테스트가 돌고 그 결과를 출력할 수 있어야 합니다.

## Advanced
* 테스트의 커버리지는 어떤 개념일까요? 프로젝트에서 테스트의 커버리지는 어떻게 접근하는 것이 좋을까요?
